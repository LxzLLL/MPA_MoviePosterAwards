@model MPA_MoviePosterAwards.Web.Models.LoginViewModel

@{
    Layout = "";
    ViewBag.Title = "Login";
}

<!DOCTYPE html>

<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Active</title>
    <link href="~/Content/Common.css" rel="stylesheet" />
    <link href="~/Content/ms-loader.css" rel="stylesheet" />
    <script src="~/Content/jquery.js"></script>

    <style>
        body {
            height: 100%;
            width: 100%;
            background-color: #000000;
            overflow: hidden;
        }

        .ms-signin-back {
            position: fixed;
            height: 400%;
            width: 100%;
            top: -300%;
            left: 0;
            z-index: -1;
            -webkit-filter: blur(2px);
            filter: blur(2px);
            /*background: url('../../Content/imgs/back竖直.jpg');*/
            background: url('../../Content/Images/Curtain.png');
            /*background: url('https://img1.doubanio.com/view/movie_poster_cover/lpst/public/p2436030518.webp');*/
            /*background-position: center;*/
            /*background-size: contain;*/
            transition: all 0.15s ease-in-out;
            animation: signinback 30s ease-in-out;
        }

        @@keyframes signinback {
            from {
                top: 0;
            }

            to {
                top: -300%;
            }
        }

        .ms-signin-contents {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            text-align: center;
            background-color: rgba(0,0,0,0.8);
            /*子元素垂直居中*/
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ms-signin-body {
            position: relative;
            text-align: left;
            width: 720px;
            height: 400px;
            border-radius: 10px;
            background-color: rgba(255,255,255,0.6);
            overflow: hidden;
        }

        .ms-signin-lines {
            position: absolute;
            left: 0;
            top: 0;
            height: 400px;
            width: 267px;
            border-right: 1px solid #223344;
            background-image: url('../../Content/Images/Subjects/p1425458092.jpg');
            background-position: center;
            background-size: cover;
        }

        .ms-signin-loading {
            position: absolute;
            width: 20%;
            height: 20%;
            top: 40%;
            left: 40%;
            background-color: rgba(255,255,255,0.7);
            z-index: 0;
            transition: all 0.25s ease-in-out;
            opacity: 0;
            visibility: hidden;
            /*子元素垂直居中*/
            display: flex;
            align-items: center;
            justify-content: center;
        }

            .ms-signin-loading.active {
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                opacity: 1;
                z-index: 3;
                visibility: visible;
            }

        .ms-signin-signin {
            position: absolute;
            left: 267px;
            top: 0;
            height: 400px;
            width: 453px;
            font-size: 16px;
            font-family: 'Microsoft JhengHei','Microsoft YaHei','华文黑体';
            text-align: center;
            margin: 0;
            padding: 0;
        }

        .ms-signin-title {
            height: 70px;
            border-bottom: 1px solid #223344;
            border-left: 1px solid #223344;
            padding: 20px;
            background-color: rgba(255,255,255,0.5);
        }

        .ms-signin-form {
            width: 100%;
            height: 290px;
            position: relative;
            overflow: hidden;
        }

            .ms-signin-form .ms-signin-form-signin,
            .ms-signin-form .ms-signin-form-signup {
                position: absolute;
                width: 60%;
                height: 100%;
                left: 20%;
                transition: all 1.0s ease-in-out;
            }

            .ms-signin-form .ms-signin-form-signin {
                z-index: 1;
                top: -100%;
            }

                .ms-signin-form .ms-signin-form-signin.active {
                    z-index: 2;
                    top: 0;
                }

            .ms-signin-form .ms-signin-form-signup {
                z-index: 1;
                bottom: -100%;
            }

                .ms-signin-form .ms-signin-form-signup.active {
                    z-index: 2;
                    bottom: 0;
                }

            .ms-signin-form input[type=text],
            .ms-signin-form input[type=password] {
                display: inline-block;
                float: left;
                overflow: hidden;
                font-size: 1.0em;
                font-family: inherit;
                width: 100%;
                padding: 0.5em 1.0em;
                background-color: #FFFFFF;
                border: 1px solid #666666;
                border-radius: 3px;
                box-shadow: 0 1px 1px rgba(0,0,0,0.5);
                box-sizing: border-box;
            }

                .ms-signin-form input[type=text]::-webkit-input-placeholder {
                    font-weight: bold;
                }

            .ms-signin-form input[type=button],
            .ms-signin-form input[type=submit] {
                display: inline-block;
                overflow: hidden;
                font-size: 1.0em;
                font-family: inherit;
                padding: 0.5em;
                width: 100%;
                transition: all 0.25s ease;
                float: left;
                box-shadow: 0 1px 1px rgba(0,0,0,0.5);
            }

        .ms-button-signin {
            color: #FFFFFF;
            background-color: #FF3300;
            border: 1px solid #FF3300;
            border-radius: 3px;
        }

            .ms-button-signin:hover {
                background-color: #FF6600;
                border-color: #FF6600;
            }

        .ms-button-signup {
            color: #383838;
            background-color: #FFFFFF;
            border: 1px solid #666666;
            border-radius: 3px;
        }

            .ms-button-signup:hover {
                background-color: #181818;
                border-color: #181818;
                color: #FFFFFF;
            }

        .ms-signin-spliter {
            float: left;
            position: relative;
            width: 100%;
            margin: 10px auto;
            text-align: center;
        }

            .ms-signin-spliter:before {
                content: '';
                position: absolute;
                top: 50%;
                left: 10%;
                width: 30%;
                height: 1px;
                background-color: #666666;
            }

            .ms-signin-spliter:after {
                content: '';
                position: absolute;
                top: 50%;
                right: 10%;
                width: 30%;
                height: 1px;
                background-color: #666666;
            }
    </style>
</head>

<body>
    <div class="ms-signin-back"></div>

    <div class="ms-signin-contents">

        <div class="ms-signin-body">
            <div class="ms-signin-lines"></div>
            <div class="ms-signin-signin">
                <div class="ms-signin-title">
                    <div style="font-family: '方正清刻本悦宋简体'; font-size: 2.1em; display: block; color: #FF3300; font-weight: 700;">为爱电影的人</div>
                    <div style="color: #454545; font-weight: 400; margin-top: 10px; word-spacing: 10px; letter-spacing: 1px;">For people who love movies</div>
                </div>

                <div class="ms-signin-form">
                    @using (Html.BeginForm("Login", "Account", new { returnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                    {
                        @Html.AntiForgeryToken()
                        <div class="ms-signin-form-signin active">
                            @Html.TextBoxFor(m => m.Account, new { placeholder = "用户名", style = "margin-top: 25px;" })
                            @Html.ValidationMessageFor(m => m.Account, "", new { @class = "text-danger" })
                            @Html.PasswordFor(m => m.Password, new { placeholder = "密码", style = "margin-top: 20px;" })
                            @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })

                            <input id="btnLogin" type="submit" value="登录" class="ms-button-signin" style="margin-top: 20px;" onclick="loading()" />
                            <div class="ms-signin-spliter"><span>or</span></div>
                            <input type="button" value="注册一个." class="ms-button-signup" onclick="register()" />
                            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        </div>
                    }
                </div>
            </div>
            <div class="ms-signin-loading">
                <div class="ms-loader-square-spin"></div>
            </div>
        </div>
    </div>

    <script>
        function register() {
            window.location.href = "/Account/Register";
        }

        function loading() {
            $('.ms-signin-loading').addClass('active');
        }

        //背景图片滚动完成后 给body绑定mousewheel事件 使得鼠标滚轮可以滚动背景图片
        $('.ms-signin-back').on('animationend', function () {
            console.log('aniamtion complete');
            document.body.addEventListener('mousewheel', function () {

                var $top = $('.ms-signin-back').css('top').replace('px', '');
                var $bodyheight = $(window).height();
                var $height = $('.ms-signin-back').css('height').replace('px', '');

                if ($top * 1 + event.wheelDelta * 1 + $height * 1 - $bodyheight * 1 > 0 && $top * 1 + event.wheelDelta * 1 < 0)
                    $('.ms-signin-back').css('top', ($top * 1 + event.wheelDelta * 1) + 'px');
                else if ($top * 1 + event.wheelDelta * 1 >= 0)
                    $('.ms-signin-back').css('top', '0');
                else
                    $('.ms-signin-back').css('top', ($bodyheight - $height) + 'px');

            });
        });

        $(document).ready(function () {
            $.ajax({
                url: '/Account/GetRandomImage',
                type: 'get',
                success: function (data) {
                    console.log(data)
                    $('.ms-signin-lines').css('background-image', 'url(\'../../Content/Images/Subjects/' + data + '\')');
                    console.log($('.ms-signin-lines').css('background-image'));
                }
            });
        });
    </script>

</body>

</html>

